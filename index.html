<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asesor de Diseño IA - YAN'Z SMART WOOD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Roboto+Slab:wght@700;800&display=swap');
        body { font-family: 'Poppins', sans-serif; }
        .font-display { font-family: 'Roboto Slab', serif; }
        .text-shadow-strong { text-shadow: 1px 1px 6px rgba(0, 0, 0, 0.8); }
        .media-background {
            @apply object-cover object-center w-full h-full;
        }
        .pill-button {
            @apply bg-transparent text-white border-2 border-white/80 rounded-full px-6 py-2 text-xs font-semibold uppercase tracking-wider hover:bg-white hover:text-black transition-all duration-300;
        }
        .loader {
            width: 48px; height: 48px; border: 5px solid;
            border-color: #ffffff transparent;
            border-radius: 50%; display: inline-block;
            animation: rotation 1s linear infinite;
        }
        @keyframes rotation { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-black text-white">

    <!-- CONTENEDOR DE LA INTRODUCCIÓN CON EL VIDEO COMPLETO -->
    <div id="intro-container" class="fixed inset-0 z-50 bg-black flex items-center justify-center opacity-0 transition-opacity duration-500 pointer-events-none">
        <video id="intro-video" muted playsinline class="w-full h-full object-cover">
             <source src="https://raw.githubusercontent.com/Yanzsmartwood2025/yanzai/main/intro-completa.mp4" type="video/mp4">
        </video>
    </div>

    <!-- BOTÓN DE INICIO INICIAL -->
    <div id="start-button-container" class="fixed inset-0 z-50 flex items-center justify-center">
        <button id="start-button" class="pill-button px-10 py-4 text-lg">Entrar</button>
    </div>

    <!-- CONTENEDOR DE MEDIOS DE FONDO (oculto al inicio) -->
    <div id="background-media-container" class="fixed top-0 left-0 w-full h-full z-[-1] opacity-0 transition-opacity duration-1000">
        <video id="video-neutral" muted playsinline class="media-background"><source src="https://raw.githubusercontent.com/Yanzsmartwood2025/yanzai/main/video-neutral.mp4" type="video/mp4"></video>
        <video id="video-happy" loop muted playsinline class="media-background hidden"><source src="https://raw.githubusercontent.com/Yanzsmartwood2025/yanzai/main/video-happy.mp4" type="video/mp4"></video>
        <video id="video-thinking" loop muted playsinline class="media-background hidden"><source src="https://raw.githubusercontent.com/Yanzsmartwood2025/yanzai/main/video-thinking.mp4" type="video/mp4"></video>
        <video id="video-suggesting" loop muted playsinline class="media-background hidden"><source src="https://raw.githubusercontent.com/Yanzsmartwood2025/yanzai/main/video-suggesting.mp4" type="video/mp4"></video>
        <video id="video-grateful" loop muted playsinline class="media-background hidden"><source src="https://raw.githubusercontent.com/Yanzsmartwood2025/yanzai/main/video-grateful.mp4" type="video/mp4"></video>
    </div>

    <!-- Header y Contenido Principal -->
    <header id="main-header" class="absolute top-0 left-0 right-0 p-4 sm:p-5 flex justify-between items-center z-30 opacity-0 transition-opacity duration-1000">
        <div><img src="https://raw.githubusercontent.com/Yanzsmartwood2025/yanzai/main/logoyanz.png" alt="YAN'Z SMART WOOD Logo" class="h-8 sm:h-10"></div>
        <div class="hidden sm:flex items-center gap-4">
            <button class="pill-button text-xs py-2">Generar</button>
            <button class="pill-button text-xs py-2">Concepto</button>
        </div>
    </header>
    <div id="main-content" class="relative w-full min-h-screen flex flex-col items-center justify-center text-center opacity-0 transition-opacity duration-1000">
        <div class="relative z-10 w-full max-w-lg p-4">
            <h1 class="font-display text-3xl sm:text-4xl font-bold tracking-tight text-shadow-strong">Aria</h1>
            <p class="mt-1 text-sm text-gray-200">Tu asesora de diseño IA.</p>
            <div class="mt-5 w-full">
                <input id="prompt-input" type="text" placeholder="Describe tu visión..." class="w-full px-5 py-3 text-sm bg-white/10 border border-gray-500 rounded-full focus:ring-2 focus:ring-indigo-400 focus:outline-none transition duration-200 placeholder:text-gray-400" />
            </div>
            <div class="mt-4">
                <button id="generate-button" class="pill-button disabled:bg-white/20 disabled:cursor-not-allowed disabled:text-gray-400 disabled:border-gray-500">
                    <span id="button-content">Generar Concepto</span>
                </button>
            </div>
            <div id="error-message" class="mt-3 text-red-400 font-medium text-sm"></div>
        </div>
    </div>
    
    <div id="result-wrapper" class="absolute top-0 left-0 w-full h-full flex items-center justify-center p-4 hidden z-20">
         <div id="result-container" class="w-full max-w-3xl"></div>
    </div>
    <div id="loading-state" class="absolute inset-0 flex flex-col items-center justify-center bg-black/50 hidden z-40">
        <div class="loader"></div>
        <p id="loading-message" class="text-gray-300 font-medium text-lg mt-4"></p>
    </div>

    <script>
        // Elementos de la UI
        const startButtonContainer = document.getElementById('start-button-container');
        const startButton = document.getElementById('start-button');
        const introContainer = document.getElementById('intro-container');
        const introVideo = document.getElementById('intro-video');
        const backgroundContainer = document.getElementById('background-media-container');
        const mainHeader = document.getElementById('main-header');
        const mainContent = document.getElementById('main-content');
        const resultWrapper = document.getElementById('result-wrapper');
        const promptInput = document.getElementById('prompt-input');
        const generateButton = document.getElementById('generate-button');
        const errorMessage = document.getElementById('error-message');
        const loadingState = document.getElementById('loading-state');
        const resultContainer = document.getElementById('result-container');

        const media = {
            neutral: document.getElementById('video-neutral'),
            happy: document.getElementById('video-happy'),
            thinking: document.getElementById('video-thinking'),
            suggesting: document.getElementById('video-suggesting'),
            grateful: document.getElementById('video-grateful')
        };
        let currentMedia = null;

        function switchBackground(mediaName) {
            const newMedia = media[mediaName] || media.neutral;
            if (newMedia !== currentMedia) {
                if(currentMedia) {
                    currentMedia.classList.add('hidden');
                    if (currentMedia.tagName === 'VIDEO') currentMedia.pause();
                }
                newMedia.classList.remove('hidden');
                if (newMedia.tagName === 'VIDEO' && newMedia.id !== 'video-neutral') {
                    newMedia.currentTime = 0;
                    newMedia.play().catch(e => console.error("Error al reproducir video:", e));
                }
                currentMedia = newMedia;
            }
        }

        function speak(text, onEndCallback) {
            speechSynthesis.cancel();
            const utterance = new SpeechSynthesisUtterance(text);
utterance.lang = 'es-ES';
            utterance.onend = onEndCallback;
            speechSynthesis.speak(utterance);
        }

        function startIntroSequence() {
            // Desvanece el botón de entrar
            startButtonContainer.classList.add('opacity-0');
            setTimeout(() => startButtonContainer.style.display = 'none', 500);

            // Muestra el contenedor de la intro y reproduce el video
            introContainer.classList.remove('opacity-0');
            introContainer.classList.remove('pointer-events-none');
            introVideo.play().catch(e => console.error("Error al reproducir video de intro:", e));
            speak("Hola, soy Aria, tu asesora de diseño. Describe tu visión y la haré realidad.");

            introVideo.onended = () => {
                introContainer.classList.add('opacity-0');
                backgroundContainer.classList.remove('opacity-0');
                switchBackground('neutral');
                mainHeader.classList.remove('opacity-0');
                mainContent.classList.remove('opacity-0');
                setTimeout(() => introContainer.style.display = 'none', 1000);
            };
        }

        startButton.addEventListener('click', startIntroSequence);

        // ... El resto del código JS no necesita cambios
        generateButton.addEventListener('click', handleQuery);
        promptInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') handleQuery();
        });

        async function handleQuery() {
            // ...
        }
        function setLoading(isLoading, message = '') {
            // ...
        }
        function displayDesignResult({ emotion, title, description }, originalPrompt) {
            // ...
        }
    </script>
</body>
</html>
```</immersive>
